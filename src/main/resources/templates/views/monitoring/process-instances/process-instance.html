<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments/header :: head"></head>
  <body onload="loadProcessInstanceView();">
    <div th:replace="fragments/navbar :: navbar"></div>

    <div
      th:replace="views/publish-message-modal.html :: #publish-message-modal"
    ></div>
    <div th:replace="views/time-travel-modal.html :: #time-travel-modal"></div>
    <div
      th:replace="views/set-variables-modal.html :: #set-variable-modal"
    ></div>
    <div
      th:replace="views/modals/complete-job-modal.html :: #complete-job-modal"
    ></div>
    <div th:replace="views/modals/fail-job-modal.html :: #fail-job-modal"></div>
    <div
      th:replace="views/modals/throw-error-job-modal.html :: #throw-error-job-modal"
    ></div>
    <div
      th:replace="views/modals/message-detail-modal.html :: #message-detail-modal"
    ></div>
    <div
      th:replace="views/modals/error-detail-modal.html :: #error-detail-modal"
    ></div>
    <div
      th:replace="views/modals/task-form-modal.html :: #task-form-modal"
    ></div>

    <div class="container-fluid">
      <div class="row justify-content-between">
        <div class="col">
          <nav id="process-instance-breadcrumb" aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="/view/deployment">Processes</a>
              </li>
              <li
                class="breadcrumb-item"
                aria-current="page"
                id="bpmn-process-id"
              ></li>
              <li
                class="breadcrumb-item active"
                aria-current="page"
                id="process-instance-page-key"
                th:text="${processInstanceKey}"
              ></li>
            </ol>
          </nav>
        </div>

        <div class="col-auto">
          <button
            type="button"
            id="process-instance-show-element-counters"
            class="btn btn-sm btn-secondary"
            title="Show element counters"
          >
            <svg class="bi" width="18" height="18" fill="white">
              <use xlink:href="/img/bootstrap-icons.svg#eye" />
            </svg>
          </button>

          <button
            type="button"
            id="process-instance-hide-element-counters"
            class="btn btn-sm btn-secondary visually-hidden"
            title="Hide element counters"
          >
            <svg class="bi" width="18" height="18" fill="white">
              <use xlink:href="/img/bootstrap-icons.svg#eye-slash" />
            </svg>
          </button>
        </div>

        <div class="col-auto">
          <div class="btn-group">
            <button
              type="button"
              id="process-instance-set-variables"
              class="btn btn-sm btn-primary overlay-button"
              data-bs-toggle="modal"
              data-bs-target="#set-variable-modal"
            >
              <svg class="bi" width="18" height="18" fill="white">
                <use xlink:href="/img/bootstrap-icons.svg#braces" />
              </svg>
              Set Variables
            </button>
            <button
              type="button"
              class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              <span class="visually-hidden">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu">
              <li>
                <a
                  id="process-instance-cancel"
                  class="dropdown-item"
                  onclick="cancelProcessInstance();"
                  href="#"
                >
                  <svg class="bi" width="18" height="18">
                    <use xlink:href="/img/bootstrap-icons.svg#trash" />
                  </svg>
                  Cancel Instance
                </a>
              </li>
              <li>
                <a
                  id="process-instance-publish-message"
                  class="dropdown-item"
                  data-bs-toggle="modal"
                  data-bs-target="#publish-message-modal"
                  href="#"
                >
                  <svg class="bi" width="18" height="18">
                    <use xlink:href="/img/bootstrap-icons.svg#envelope" />
                  </svg>
                  Publish Message
                </a>
              </li>
              <li>
                <a
                  id="process-instance-time-travel"
                  class="dropdown-item"
                  onclick="timeTravelModalElementId = undefined"
                  data-bs-toggle="modal"
                  data-bs-target="#time-travel-modal"
                  href="#"
                >
                  <svg class="bi" width="18" height="18">
                    <use xlink:href="/img/bootstrap-icons.svg#clock" />
                  </svg>
                  Time Travel
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-2">
          <table class="table table-striped border">
            <tbody>
              <tr>
                <th>Process Instance Key</th>
              </tr>
              <tr>
                <td id="process-instance-key"></td>
              </tr>
              <tr>
                <th>Start Time</th>
              </tr>
              <tr>
                <td id="process-instance-start-time"></td>
              </tr>
              <tr>
                <th>End Time</th>
              </tr>
              <tr>
                <td id="process-instance-end-time"></td>
              </tr>
              <tr>
                <th>State</th>
              </tr>
              <tr>
                <td id="process-instance-state"></td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="col-10">
          <div id="canvas" style="height: 400px"></div>
        </div>
      </div>

      <div class="col">
        <div
          th:replace="views/monitoring/process-instances/process-instance-details.html :: process-instance-details"
        ></div>
      </div>
    </div>

    <footer th:replace="fragments/footer :: footer"></footer>
  </body>
</html>
